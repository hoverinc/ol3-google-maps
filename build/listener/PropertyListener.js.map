{"version":3,"file":"PropertyListener.js","sources":["../../src/olgm/listener/PropertyListener.js"],"sourcesContent":["/**\n * @module olgm/listener/PropertyListener\n */\nimport Listener from './Listener';\n\nclass PropertyListener extends Listener {\n  /**\n   * Listener for OL object properties. Has utilities for listening on the property value.\n   * @param {module:ol/Object~BaseObject} target Object with a property\n   * @param {module:ol/Object~BaseObject=} oldTarget The previous object with a property\n   * @param {string} key Property key\n   * @param {function} listen Takes the current and previous property value as arguments.\n   * Called on initialization and when the property value changes.\n   * On initialization, the previous property value will be taken from the old target, if any.\n   * Can return an AbstractListener or an array of AbstractListeners which will be unlistened when the property value changes.\n   */\n  constructor(target, oldTarget, key, listen) {\n    super(target.on('change:' + key, e => {\n      if (this.innerListener) {\n        this.innerListener.unlisten();\n      }\n      this.innerListener_ = listen(e.target.get(e.key), e.oldValue);\n    }));\n\n    /**\n     * @type {?module:olgm/AbstractListener~AbstractListener|Array<module:olgm/AbstractListener~AbstractListener>}\n     * @private\n     */\n    this.innerListener_ = listen(target.get(key), oldTarget && oldTarget.get(key));\n  }\n\n  /**\n   * @inheritdoc\n   */\n  unlisten() {\n    if (this.innerListener_) {\n      if (Array.isArray(this.innerListener_)) {\n        this.innerListener.forEach(listener => listener.unlisten());\n      } else {\n        this.innerListener_.unlisten();\n      }\n    }\n    super.unlisten();\n  }\n}\n\nexport default PropertyListener;\n"],"names":["super","this"],"mappings":"AAAA;;;AAGA,OAAO,QAAQ,MAAM,YAAY,CAAC;;AAElC,IAAM,gBAAgB,GAAiB;EAWrC,yBAAW,CAAC,MAAM,EAAE,SAAS,EAAE,GAAG,EAAE,MAAM,EAAE;;AAAC;IAC3CA,aAAK,OAAC,MAAM,CAAC,EAAE,CAAC,SAAS,GAAG,GAAG,YAAE,EAAC,CAAC,AAAG;MACpC,IAAIC,MAAI,CAAC,aAAa,EAAE;QACtBA,MAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC;OAC/B;MACDA,MAAI,CAAC,cAAc,GAAG,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC;KAC/D,CAAC,CAAC,CAAC;;;;;;IAMJ,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,SAAS,IAAI,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;;;;;4DAChF;;;;;6BAKD,6BAAQ,GAAG;IACT,IAAI,IAAI,CAAC,cAAc,EAAE;MACvB,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,EAAE;QACtC,IAAI,CAAC,aAAa,CAAC,OAAO,WAAC,SAAQ,CAAC,SAAG,QAAQ,CAAC,QAAQ,KAAE,CAAC,CAAC;OAC7D,MAAM;QACL,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC;OAChC;KACF;IACDD,kBAAK,CAAC,aAAQ,KAAC,CAAC,CAAC;GAClB;;;EAtC4B,WAuC9B;;AAED,eAAe,gBAAgB,CAAC;"}